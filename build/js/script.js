!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);class s{constructor(e,t){this.anchor=t,e.events.subscribe("change",()=>this.render())}}class n{constructor(){this.subscribers={}}subscribe(e,t){this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t)}next(e,t){this.subscribers[e]&&this.subscribers[e].forEach(e=>e(t))}}var a=new class{constructor(e){this.reducers=e,this.state={playerOne:"PlayerOne",playerTwo:"PlayerTwo",cells:Array(9).fill(null),firstPlayerMove:!0,counterOne:0,counterTwo:0,firstPlayerX:!0},this.events=new n}dispatch(e,t){this.reducers[e]&&(this.state=this.reducers[e](t,this.state),this.events.next("change",this.state))}}({addPlayerOne:(e,t)=>({...t,playerOne:e}),addPlayerTwo:(e,t)=>({...t,playerTwo:e}),getCounterOne:(e,t)=>({...t,counterOne:e}),getCounterTwo:(e,t)=>({...t,counterTwo:e}),changeCounterOne:(e,t)=>({...t,counterOne:t.counterOne+e}),changeCounterTwo:(e,t)=>({...t,counterTwo:t.counterTwo+e}),resetGame:(e,t)=>({...t,firstPlayerMove:e.value,firstPlayerX:e.value,cells:e.cells}),restartGame:(e,t)=>({...t,playerOne:"PlayerOne",playerTwo:"PlayerTwo",cells:e,firstPlayerMove:!0,counterOne:0,counterTwo:0}),changeCell:(e,t)=>({...t,cells:e}),switchPlayer:(e,t)=>({...t,firstPlayerMove:e}),firstPlayerChoseX:(e,t)=>({...t,firstPlayerX:e})});var l=(e,t,r)=>{r&&(a.dispatch(e,r.trim()),localStorage.setItem(t,JSON.stringify(r)),"addPlayerOne"===e&&a.state.cells.every(e=>null===e)&&document.querySelector(".chooseSymbol").classList.add("invis-off"))};var c=(e,t)=>{const r=a.state.cells.slice();r[e]=t,a.dispatch("changeCell",r),localStorage.setItem("cells",JSON.stringify(r))};var o=()=>{const{cells:e}=a.state;return[[e[0],e[1],e[2]],[e[3],e[4],e[5]],[e[6],e[7],e[8]],[e[0],e[3],e[6]],[e[1],e[4],e[7]],[e[2],e[5],e[8]],[e[0],e[4],e[8]],[e[2],e[4],e[6]]]};const i=(e,t)=>localStorage.setItem(e,JSON.stringify(t));var u=(e,t)=>{(()=>{const e=Array(9).fill(null);localStorage.removeItem("cells"),a.state.firstPlayerX?(a.dispatch("resetGame",{cells:e,value:!0}),i("turn",!0)):(a.dispatch("resetGame",{cells:e,value:!1}),i("turn",!1))})(),document.querySelector("#winner").innerText=`${e} WON!`,a.dispatch(t,1),i("counterOne",a.state.counterOne),i("counterTwo",a.state.counterTwo)};(new class extends s{constructor(){super(a,document.querySelector("#headerWrapper"))}render(){this.anchor.innerHTML='\n          <p class="header">Tic-Tac-Toe!</p>\n          <div id="playersWrapper">\n             <span class="playerOne">\n               <input type="text" id="playerOne" placeholder="Player-1 Name">\n               <button class="save" id="savePlayerOne">save</button>\n             </span>\n             <span class="playerTwo">\n                <input type="text" id="playerTwo" placeholder="Player-2 Name">\n                <button class="save" id="savePlayerTwo">save</button>\n             </span>\n          </div>\n             <span class="startWrapper">\n               <button class="resetGame">ResetGame</button>\n             </span>\n        ',this.setUpListeners()}setUpListeners(){const e=this.anchor.querySelector("#playerOne"),t=this.anchor.querySelector("#playerTwo"),r=document.querySelector(".chooseSymbol");this.anchor.querySelector("#savePlayerOne").addEventListener("click",()=>{l("addPlayerOne","PlayerOneName",e.value)}),e.addEventListener("keypress",t=>{"Enter"===t.key&&l("addPlayerOne","PlayerOneName",e.value)}),this.anchor.querySelector("#savePlayerTwo").addEventListener("click",l("addPlayerTwo","PlayerTwoName",t.value)),t.addEventListener("keypress",e=>"Enter"===e.key&&l("addPlayerTwo","PlayerTwoName",t.value)),this.anchor.querySelector(".resetGame").addEventListener("click",()=>{const e=Array(9).fill(null);localStorage.clear(),document.querySelector("#winner").innerText="",a.dispatch("restartGame",e)}),document.querySelector(".x-button").addEventListener("click",()=>{r.classList.remove("invis-off")}),document.querySelector(".o-button").addEventListener("click",()=>{r.classList.remove("invis-off"),a.dispatch("switchPlayer",!1),a.dispatch("firstPlayerChoseX",!1),localStorage.setItem("firstPlayerX",JSON.stringify(!1))})}}).render(),(new class extends s{constructor(){super(a,document.querySelector("#gameField")),this.onInit(),this.switchPlayer=this.switchPlayer.bind(this)}setItem(e,t){localStorage.setItem(e,JSON.stringify(t))}onInit(){const e=e=>JSON.parse(localStorage.getItem(e)),t=e("cells"),r=e("turn"),s=e("firstPlayerX");t&&a.dispatch("changeCell",t),null!==r&&a.dispatch("switchPlayer",r),null!==s&&a.dispatch("firstPlayerChoseX",s)}render(){this.anchor.innerHTML=`\n      <div class="cellsWrapper">\n      ${a.state.cells.map((e,t)=>e?`<p class="cell" id="${t}">${e}</p>`:`<p class="cell" id="${t}"></p>`).join("")}\n      </div>\n      `,this.setupListeners()}checkWinner(){const{firstPlayerX:e,playerOne:t,playerTwo:r}=a.state;o().forEach(s=>{s.every(e=>"X"===e)&&(e?u(t,"changeCounterOne"):u(r,"changeCounterTwo"))}),o().forEach(s=>{s.every(e=>"O"===e)&&(e?u(r,"changeCounterTwo"):u(t,"changeCounterOne"))})}switchPlayer(e){const{firstPlayerMove:t}=a.state;if(e.target.classList.contains("cell")){let r;if(!0===t&&""===e.target.innerText)r={id:e.target.id,value:"X"},a.dispatch("switchPlayer",!1),this.setItem("turn",!1);else{if(!1!==t||""!==e.target.innerText)return;r={id:e.target.id,value:"O"},a.dispatch("switchPlayer",!0),this.setItem("turn",!0)}c(r.id,r.value)}}setupListeners(){this.anchor.querySelector(".cellsWrapper").addEventListener("click",this.switchPlayer),this.anchor.querySelector(".cellsWrapper").addEventListener("click",this.checkWinner)}}).render(),(new class extends s{constructor(){super(a,document.querySelector("#score")),this.onInit()}onInit(){const e=e=>JSON.parse(localStorage.getItem(e)),t=e("PlayerOneName"),r=e("PlayerTwoName");t&&a.dispatch("addPlayerOne",t),r&&a.dispatch("addPlayerTwo",r);const s=e("counterOne"),n=e("counterTwo");s&&a.dispatch("getCounterOne",s),n&&a.dispatch("getCounterTwo",n)}render(){this.anchor.innerHTML=`\n        <p id="firstPlayer">${a.state.playerOne}: ${a.state.counterOne}</p>\n        <p id="secondPlayer">${a.state.playerTwo} : ${a.state.counterTwo} </p>\n        `}}).render()}]);